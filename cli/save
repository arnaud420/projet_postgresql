#!/usr/bin/env node
/*
 *  Github/TonyChG
 *  index.js
 *  Description:
**/

// Specify root dir
require('app-module-path').addPath(__dirname);

const config = require('config');

// Import classes
const Manager = require('lib/manager');
const Command = require('lib/command');

async function main() {
    // const cmd = new Command(process.argv);
    const manager = new Manager(config.database.connection);

    // Test mysql connection
    await manager.testConnection();

    // Get databases
    console.log(await manager.listDatabases());

    manager.loadBackups();
    manager.backupslist.forEach(backup => console.log(backup))

    try {
        const newSave = await manager.save('wordpress')
        manager.store();
        manager.exit();
    } catch(e) {
        console.error(e.message)
    }
}

main();

